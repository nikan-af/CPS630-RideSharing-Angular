<div class="content">
    <p class="title">Pick Your Ride:</p>
    <div class="cars">
        <div *ngFor="let car of cars; let i = index">
            <!-- Limits each row to 3 products only using mod -->
            <div class="row" *ngIf="i % 3 === 0">
                <div class="col-md-4" *ngIf="i < cars.length" (click)="select(cars[i].CarId)">
                    <mat-card appMaterialElevation class="example-card"
                        [ngClass]="{'selected mat-elevation-z10': selected === cars[i].CarId}">
                        <div class="card-image"><img raisedElevation="16" mat-card-image src={{cars[i].ImageURL}}
                                alt={{cars[i].productName}}></div>
                        <mat-card-content class="mat-content">
                            <p>
                                Car Model: {{cars[i].CarModel}}
                            </p>
                            <p class="price">
                                Price: CAD {{cars[i].CarPrice}}
                            </p>
                        </mat-card-content>
                        <mat-icon class="selection" [hidden]="selected !== cars[i].CarId">check_circle</mat-icon>
                    </mat-card>
                </div>
                <div class="col-md-4" *ngIf="i + 1 < cars.length" (click)="select(cars[i+1].CarId)">
                    <mat-card appMaterialElevation class="example-card"
                        [ngClass]="{'selected': selected === cars[i+1].CarId}">
                        <div class="card-image"><img raisedElevation="16" mat-card-image src={{cars[i+1].ImageURL}}
                                alt={{cars[i+1].productName}}></div>
                        <mat-card-content class="mat-content">
                            <p>
                                Car Model: {{cars[i+1].CarModel}}
                            </p>
                            <p class="price">
                                Price: CAD {{cars[i+1].CarPrice}}
                            </p>
                        </mat-card-content>
                        <mat-icon class="selection" [hidden]="selected !== cars[i+1].CarId">check_circle</mat-icon>
                    </mat-card>
                </div>
                <div class="col-md-4" *ngIf="i + 2 < cars.length" (click)="select(cars[i+2].CarId)">
                    <mat-card appMaterialElevation class="example-card"
                        [ngClass]="{'selected': selected === cars[i+2].CarId}">
                        <div class="card-image"><img raisedElevation="16" mat-card-image src={{cars[i+2].ImageURL}}
                                alt={{cars[i+2].productName}}></div>
                        <mat-card-content class="mat-content">
                            <p>
                                Car Model: {{cars[i+2].CarModel}}
                            </p>
                            <p class="price">
                                Price: CAD {{cars[i+2].CarPrice}}
                            </p>
                        </mat-card-content>
                        <mat-icon class="selection" [hidden]="selected !== cars[i+2].CarId">check_circle</mat-icon>
                    </mat-card>
                </div>
            </div>
        </div>
    </div>

    <p class="title">Source & Destination</p>
    <div class="direction-section">
        <div class="row">
            <div class="col-md-4">
                <mat-form-field appearance="outline" class="field">
                    <mat-label>Source</mat-label>
                    <input #source autocorrect="off" autocapitalize="off" spellcheck="off" matInput
                        placeholder="Source Address">
                </mat-form-field>
                <br>
                <mat-form-field appearance="outline" class="field">
                    <mat-label>Destination</mat-label>
                    <input #destination autocorrect="off" autocapitalize="off" spellcheck="off" matInput
                        placeholder="Destination Address">
                </mat-form-field>
                <br>
                <div class="actionButtons">
                    <button mat-raised-button class="submitButton" type="submit" (click)="onGetEstimate()">GET ESTIMATE</button>
                </div>
                <div [hidden]="!displayPickRideError" class="error">
                    <p>First pick your ride.</p>
                </div>
            </div>
            <div class="col-md-8">
                <div #mapContainer id="map"></div>
                <!-- <agm-map [latitude]="lat" [longitude]="lng">
                    <agm-direction 
                      [origin]="origin" 
                      [destination]="destination"
                      [travelMode]="'DRIVING'"
                    >
                    </agm-direction>
                  </agm-map> -->

                  <!-- <agm-map [latitude]="lat" [longitude]="lng" [zoom]="zoom" [disableDefaultUI]="false">
                    <agm-direction 
                      [origin]="origin" 
                      [destination]="destination"
                      [travelMode]="'DRIVING'"
                    >
                    </agm-direction>
                </agm-map> -->
            </div>
        </div>
    </div>
</div>


<div class="backdrop" *ngIf="this.loading">
    <div class="spinner"></div>
    <div class="logo">loading...</div>
</div>